# 2.8 — Programs with Multiple Code Files (VS Code Edition) — Summary

---

# Why Split Programs into Multiple Files?

As programs grow, we split them into multiple `.cpp` files for:

- Better organization
    
- Reusability
    
- Easier maintenance
    
- Faster recompilation (only changed files recompile)
    

Important:  
**Each `.cpp` file is compiled independently.**

The compiler:

- Compiles one file at a time
    
- Does not remember what it saw in other files
    
- The linker connects everything afterward
    

---

# How This Works in VS Code

## 1️⃣ Creating a New `.cpp` File

In VS Code:

- Open **Explorer**
    
- Click **New File**
    
- Name it `something.cpp`
    
- Make sure it is in the project root (not inside `.vscode`)
    

Best practice:  
Always use the `.cpp` extension.

---

## 2️⃣ Updating `tasks.json`

Your build task must compile **all `.cpp` files**, not just one.

### Option A — Explicit (Recommended for Learning)

Replace:

```json
"${file}",
```

With:

```json
"main.cpp",
"add.cpp",
```

Add every `.cpp` file you create.

---

### Option B — Automatic (Advanced / Cleaner)

On Windows:

```json
"${fileDirname}\\**.cpp"
```

On Linux / macOS:

```json
"${fileDirname}/**.cpp"
```

This compiles **all `.cpp` files in the folder automatically**.

---

# Multi-File Example

## add.cpp

```cpp
int add(int x, int y)
{
    return x + y;
}
```

## main.cpp (WRONG — missing forward declaration)

```cpp
#include <iostream>

int main()
{
    std::cout << add(3, 4); // compile error
}
```

### Why It Fails

When compiling `main.cpp`, the compiler:

- Has never seen `add`
    
- Does not know it exists
    
- Errors immediately
    

It does NOT look inside `add.cpp`.

---

# Correct Version (Final Proper Setup)

## add.cpp

```cpp
int add(int x, int y)
{
    return x + y;
}
```

## main.cpp

```cpp
#include <iostream>

int add(int x, int y); // forward declaration

int main()
{
    std::cout << "The sum of 3 and 4 is: "
              << add(3, 4) << '\n';
    return 0;
}
```

---

# What Happens During Build

Step 1: Compiler compiles `main.cpp`  
Step 2: Compiler compiles `add.cpp`  
Step 3: Linker connects the call to `add()` in `main.cpp` with its definition in `add.cpp`

---

# Critical Rules You Must Remember

## Rule 1 — Every file must include what it uses

If a file uses:

```cpp
std::cout
std::cin
```

It must include:

```cpp
#include <iostream>
```

Even if another file already includes it.

Each file is independent.

---

## Rule 2 — Do NOT `#include` .cpp files

❌ Never do this:

```cpp
#include "add.cpp"
```

This may work in small examples but causes major problems later.

Only include headers (`.h` files), not `.cpp`.

---

## Rule 3 — If You Get Errors

### Compiler error:

`identifier not found`

→ You forgot the forward declaration.

---

### Linker error:

`undefined reference to add`

→ You forgot to compile one of the `.cpp` files  
→ Or it’s missing from `tasks.json`

If VS Code only compiles `main.cpp`, the linker cannot find `add()`.

---

# Core Insight

When an identifier is used:

|Situation|What Happens|
|---|---|
|No declaration seen|Compile error|
|Declaration seen + definition in same file|Works|
|Declaration seen + definition in other file|Linker connects them|
|Declaration seen but no definition anywhere|Linker error|

---

# The Big Picture

C++ is designed so that:

- Each `.cpp` file can be compiled independently
    
- File order does not matter
    
- Linking connects everything afterward
    

For VS Code development:

1. Create `.cpp` files properly
    
2. Add them to `tasks.json`
    
3. Use forward declarations when calling functions across files
    
4. Never include `.cpp` files
    

---

# Final Mental Model

Think of it like this:

- Compiler checks each file separately.
    
- Forward declarations tell the compiler:  
    “Trust me, this function exists somewhere.”
    
- The linker later verifies that it actually does.
    

If both compiler and linker are satisfied → program builds successfully.

---

If you want, next we can convert this into the proper professional structure using headers (`.h` files), which is how real C++ projects are organized.